<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Виртуальная примерочная</title>
  <style>
    body {margin: 0; font-family: Arial, sans-serif; background-color: #f8f9fa; display: flex;}
    .container {display: flex; width: 100%; min-height: 100vh;}
    .sidebar {width: 320px; padding: 20px; background-color: #fff; box-shadow: 2px 0 5px rgba(0,0,0,0.1);}
    .sidebar h2 {margin-top: 0; font-size: 22px; border-bottom: 2px solid #007BFF; padding-bottom: 10px;}
    .sidebar label {display: block; margin: 10px 0 5px;}
    .sidebar label.required::after {content: " *"; color: red;}
    .sidebar input, .sidebar select {width: 100%; padding: 8px; box-sizing: border-box;}
    .sidebar button {margin-top: 20px; padding: 10px; width: 100%; background-color: #007BFF; color: #fff; border: none; cursor: pointer; font-size: 16px;}
    .sidebar button:disabled {background-color: #cccccc; cursor: not-allowed;}
    .content {flex-grow: 1; padding: 20px; text-align: center;}
    .content h2 {font-size: 24px; margin-bottom: 20px; color: #333;}
    .sketchfab-embed-wrapper {width: 100%; max-width: 800px; margin: 0 auto;}
    iframe {width: 100%; height: 400px; border: none;}
    .message {font-size: 18px; color: #d9534f;}
    .recommendation {margin-top: 10px;}
    .recommendation p {font-size: 18px; font-weight: bold; margin: 5px 0;}
    .recommendation button {padding: 10px 20px; font-size: 16px; background-color: #28a745; color: #fff; border: none; cursor: pointer; border-radius: 4px;}
    .recommendation button:hover {opacity: 0.9;}
  </style>
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <h2>Настройки</h2>
      <label for="gender" class="required">Пол:</label>
      <select id="gender">
        <option value="">Выберите пол</option>
        <option value="male">Мужской</option>
        <option value="female">Женский</option>
      </select>
      <label for="height" class="required">Рост (в см):</label>
      <input type="number" id="height" min="0">
      <label for="weight">Вес (в кг):</label>
      <input type="number" id="weight" min="0">
      <label for="chest">Обхват груди (в см):</label>
      <input type="number" id="chest" min="0">
      <label for="waist">Обхват талии (в см):</label>
      <input type="number" id="waist" min="0">
      <label for="hips">Обхват бедер (в см):</label>
      <input type="number" id="hips" min="0">
      <button id="tryOn" disabled>Примерить</button>
    </div>
    <div class="content">
      <h2>Виртуальная примерка</h2>
      <div id="modelContainer" class="sketchfab-embed-wrapper">
        <p class="message">После ввода данных нажмите «примерить»</p>
      </div>
    </div>
  </div>
  <script>
    const genderSelect = document.getElementById('gender');
    const heightInput = document.getElementById('height');
    const tryOnButton = document.getElementById('tryOn');
    const modelContainer = document.getElementById('modelContainer');
    
    const modelEmbeds = {
      male: { high: '<iframe src="https://sketchfab.com/models/0ce8277ac3864dbbbde95aaa36140dc8/embed"></iframe>',
              medium: '<iframe src="https://sketchfab.com/models/0d344d388e7c465c802109737fcd3318/embed"></iframe>',
              low: '<iframe src="https://sketchfab.com/models/fee26fdf9976410e9de46373683d1601/embed"></iframe>' },
      female: { slim: '<iframe title="slim female with red sweater" src="https://sketchfab.com/models/1d651c5b6f72424587272ef0ccf4cba1/embed"></iframe>',
                fat: '<iframe title="fat female with red sweater" src="https://sketchfab.com/models/9da5c5ef9cc745db8eeb0c8ad409f7a1/embed"></iframe>' }
    };
    
    const sizeRanges = {
      male: {
        high: { height: [184, 210], weight: [75, 100], chest: [95, 115], waist: [75, 95], hips: [90, 110], size: '50-52' },
        medium: { height: [173, 183], weight: [65, 85], chest: [90, 105], waist: [70, 90], hips: [85, 105], size: '48-50' },
        low: { height: [150, 172], weight: [55, 75], chest: [85, 100], waist: [65, 85], hips: [80, 100], size: '46-48' }
      },
      female: {
        slim: { weight: [50, 75], chest: [80, 90], waist: [60, 70], hips: [85, 95], size: '44' },
        fat: { weight: [75, 90], chest: [95, 110], waist: [85, 100], hips: [100, 115], size: '46' }
      }
    };

    function checkRequiredFields() {
      tryOnButton.disabled = !(genderSelect.value && heightInput.value);
    }
    genderSelect.addEventListener('change', checkRequiredFields);
    heightInput.addEventListener('input', checkRequiredFields);

    function tryOn() {
      const gender = genderSelect.value;
      const height = parseInt(heightInput.value, 10);
      const weightVal = document.getElementById('weight').value;
      const weight = parseInt(weightVal, 10);
      const chest = parseInt(document.getElementById('chest').value, 10);
      const waist = parseInt(document.getElementById('waist').value, 10);
      const hips = parseInt(document.getElementById('hips').value, 10);
      if (!gender || isNaN(height)) return;

      let category, range;
      if (gender === 'male') {
        if (height < sizeRanges.male.low.height[0] || height > sizeRanges.male.high.height[1]) {
          modelContainer.innerHTML = '<p class="message">Введённые параметры некорректные или пока не поддерживаются</p>';
          return;
        }
        if (height >= sizeRanges.male.high.height[0]) category = 'high';
        else if (height >= sizeRanges.male.medium.height[0]) category = 'medium';
        else category = 'low';
        range = sizeRanges.male[category];
        if (weight < range.weight[0] || weight > range.weight[1] ||
            chest < range.chest[0] || chest > range.chest[1] ||
            waist < range.waist[0] || waist > range.waist[1] ||
            hips < range.hips[0] || hips > range.hips[1]) {
          modelContainer.innerHTML = '<p class="message">Введённые параметры некорректные или пока не поддерживаются</p>';
          return;
        }
      } else {
        if (height < 160 || height > 170) {
          modelContainer.innerHTML = '<p class="message">Женские модели доступны при росте от 160 до 170 см</p>';
          return;
        }
        category = (weightVal === '' || weight < sizeRanges.female.slim.weight[1]) ? 'slim' : 'fat';
        range = sizeRanges.female[category];
        // Проверяем только обхваты
        if (chest < range.chest[0] || chest > range.chest[1] ||
            waist < range.waist[0] || waist > range.waist[1] ||
            hips < range.hips[0] || hips > range.hips[1]) {
          modelContainer.innerHTML = '<p class="message">Введённые параметры некорректные или пока не поддерживаются</p>';
          return;
        }
      }
      // Успешное отображение
      const embed = modelEmbeds[gender][category];
      const size = range.size;
      modelContainer.innerHTML = `${embed}
        <div class="recommendation">
          <p>Рекомендуемый размер: ${size}</p>
          <button onclick="window.location.href='https://www.ozon.ru/cart'">В корзину</button>
        </div>`;
    }
    tryOnButton.addEventListener('click', tryOn);
  </script>
</body>
</html>
